
jQuery(document).ready(function(){
	/* mascara para os campos*/

	jQuery("#cpf").mask("999.999.999-99");
	jQuery("#cnpj").mask("99.999.999/9999-99");
	jQuery("#fone_fixo").mask("(99) 9999-9999");
	jQuery("#fone_cel").mask("(99) 99999-9999");
	jQuery("#cep").mask("99999-999");
	/* verificamos se está na tela de contas a pagar ou receber e oculta o botão de pesquisar */
	if (jQuery("#Frmcpagar").length || jQuery("#Frmcreceber").length){ jQuery("#Btn_cli_0,#Btn_cli_0_divider").hide()}else{jQuery("#Btn_cli_0,#Btn_cli_0_divider").show()}

/* libera ou bloqueia os campos conforme pessoa fisica ou juridica*/
	if(jQuery("#tp_pessoa").val() == '0'){
		jQuery("#lab02,#lab03,#lab05,#lab07,#lab08").hide();
	}if(jQuery("#tp_pessoa").val() == '1'){
		jQuery("#lab01,#lab04,#lab06").hide();
	}else{
		jQuery("#lab02,#lab03,#lab05,#lab07,#lab08").hide();
	}


});
/* fim document ready*/


/* habilita e desabilita o cmapo tarifa*/
jQuery("#tp_pessoa").change(function(){

	if(jQuery(this).val() == 1){
	  	jQuery("#lab02,#lab03,#lab05,#lab07,#lab08").show();
	  	jQuery("#lab01,#lab04,#lab06").hide();
	  	jQuery("#rzsc").focus();
	  	jQuery("#cpf,#rg,#nm_cliente").val("");
	}else{
	 	jQuery("#lab01,#lab04,#lab06").show();
	 	jQuery("#lab02,#lab03,#lab05,#lab07,#lab08").hide();
	 	jQuery("#nm_cliente").focus();
	 	jQuery("#cnpj,#ie,#im,#rzsc,#nmfant").val("");
	}
});


/*Abre uma janela para pesquisa cliente*/
jQuery("#Btn_cli_0").click(function(){
	New_window('search','980','500','Pesquisa Cliente','assets/cliente/Frm_pesquisa_clientes.php',true,false,'Carregando...');
});

/*Abre uma janela para adcionar cliente*/
jQuery("#Btn_cli_1").click(function(){
	/* mensagen de carregamento*/
	jQuery("#msg_loading").html(" Aguarde ");
	/*abre a tela de preload*/
	modal.show();
	LoadContent('assets/cliente/Frm_cliente.php','content');
});

/* faz o novo registro ou update dos dados*/
jQuery(function() {
	jQuery("#Btn_cli_2").click(function(event) {
		 /* mensagen de carregamento*/
		 jQuery("#msg_loading").html(" Aguarde ... ");
		 /*abre a tela de preload*/
		 modal.show();
		 /*desabilita o envento padrao do formulario*/
		 event.preventDefault();
		 jQuery.ajax({
						async: true,
						url: "assets/cliente/Controller_clientes.php",
						type: "post",
						data:jQuery("#FrmCliente").serialize(),
						success: function(resultado) {
														if(jQuery.isNumeric(resultado)){

																 if (jQuery("#Frmcpagar").length || jQuery("#Frmcreceber").length){
																        /* mensagen de carregamento*/
																		jQuery("#msg_loading").html(" Finalizando.. ");
																		/**/
																		UIkit.notify("Fornecedor Adcionado.", {status:'success',timeout: 2500});

																		var key=jQuery("#nm_cliente1").val();
																		/**/
																        jQuery("#"+jQuery("#FrmCliente").closest('.Window').attr('id')+"").remove();
																        /* campo de pesquisa no contas a pagar*/
																        jQuery("#keyword").focus().val(key);
																        /**/
																        if(jQuery("#keyword").focus()){modal.hide();}

																    } else {
																		/* mensagen de carregamento*/
																		jQuery("#msg_loading").html(" Carregando ");
																		/* variavel com id*/
																		var cli_id=resultado;
																		/* recarrega a pagina*/
																		LoadContent('assets/cliente/Frm_cliente.php?cli_id='+cli_id.replace(/[^\d]+/g,'')+'','content');
																	}
														}else{
																/*abre a tela de preload*/
																modal.hide();
																UIkit.notify(""+resultado+"", {status:'danger',timeout: 2500})
															}
						},
						error:function (){
							UIkit.modal.alert("Erro ao enviar dados! Erro 404");/*erro de caminho invalido do arquivo*/
							modal.hide();
						}
		});
 	});
});

